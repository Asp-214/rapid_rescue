{% extends 'base.html' %}
{% load static %}

{% block title %} Dashboard {% endblock %}

{% block links %}

    <link rel="icon" type="image/png" href="{% static 'images/logo40.png' %}">

    <link rel="stylesheet" type="text/css" href="{% static 'css/dashboard/dashboard.css' %}">

    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <link rel="stylesheet" href="{% static 'fonts/font-awesome-4.7.0/css/font-awesome.min.css' %}">


{% endblock %}

{% block header %} {% endblock %}

{% block nav %} 
    <div>   
        {% include 'utils/nav/navigation1.html'%}
    </div>
    <div>
    </div>
{% endblock %}

{% block main %}
    <div class="main-pane">
        <div id="map" class="map"></div>
    </div>

    <!-- Include Leaflet JS -->
    <script src="{% static 'js/leaflet/leaflet.js' %}"></script>
    <script>
        
        var map = L.map('map', {        
        center: [12.9716, 77.5946],  // setView([latitude, longitude], zoom level)
            zoom: 11,  // Zoom level by default
            
            // Specify the position of zoom controls
            zoomControl: false // Disable the default zoom control
        });

        // Add OpenStreetMap tile layer to the map
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, 2024 Team Elevate'
        }).addTo(map);

        // Add zoom control to the bottom right
        L.control.zoom({position: 'bottomright'}).addTo(map);

        var customIcon = L.divIcon({
            className: 'custom-marker-icon', // Custom CSS class for the marker
            iconSize: [0, 0],  // Set the size to 0x0 to remove the marker icon
            iconAnchor: [0, 0], // Set the icon anchor
            popupAnchor: [0, -20], // Set the popup anchor
         });

        // Add location markers
        "{% for location in locations %}"

            L.marker([ "{{ location.latitude }}", "{{ location.longitude }}"])
                .bindPopup(
                    "<b>{{ location.description }}</b><br>{{ location.district }},{{ location.state }}"
                    )
                .addTo(map);

        "{% endfor %}"
    </script>
{% endblock %}

{% block footer%} {% endblock %}
